<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>io_helpers.h - SORTENY Encoder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        :root {
            --bg: #f6f8fa;
            --border: #d0d7de;
            --text: #24292f;
            --header-bg: #2c3e50;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
        }
        .header {
            background: var(--header-bg);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header h1 { font-size: 1.25rem; font-weight: 600; }
        .header a { color: #58a6ff; text-decoration: none; }
        .header a:hover { text-decoration: underline; }
        .file-info {
            background: white;
            border-bottom: 1px solid var(--border);
            padding: 0.75rem 2rem;
            font-size: 0.875rem;
            color: #57606a;
        }
        .code-container {
            background: white;
            border: 1px solid var(--border);
            border-radius: 6px;
            margin: 1rem 2rem;
            overflow: hidden;
        }
        pre {
            margin: 0;
            padding: 1rem;
            overflow-x: auto;
            font-size: 0.875rem;
            line-height: 1.45;
        }
        code {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        }
        .hljs { background: white !important; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìÑ io_helpers.h</h1>
        <a href="../../../index.html">‚Üê Tornar a l'√≠ndex</a>
    </div>
    <div class="file-info">
        <strong>Ruta:</strong> src/c/io_helpers.h &nbsp;|&nbsp;
        <strong>Descripci√≥:</strong> Header amb les declaracions de les funcions d'entrada/sortida.
    </div>
    <div class="code-container">
        <pre><code class="language-c">#ifndef IO_HELPERS_H
#define IO_HELPERS_H

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdint.h&gt;

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Carga una imagen RAW (BSQ, uint16) y la convierte a float planar (B x H x W).
 * @param filename Ruta al archivo .raw
 * @param B Bandas
 * @param H Altura
 * @param W Anchura
 * @return Puntero (malloc) al tensor de floats, o NULL si falla.
 */
float* load_image_bsq_u16_to_planar_f32(const char* filename, int B, int H, int W);

/**
 * @brief Variante extendida con validaciones y opciones.
 * @param filename Ruta al archivo .raw
 * @param B Bandas
 * @param H Altura
 * @param W Anchura
 * @param expect_little_endian 1: archivo little-endian; 0: big-endian; -1: no forzar
 * @param scale_to_unit 1 para normalizar a [0,1] dividiendo por 65535, 0 deja valores originales
 * @return Puntero (malloc) al tensor de floats o NULL si falla.
 */
float* load_image_bsq_u16_to_planar_f32_ex(const char* filename, int B, int H, int W, 
                                           int expect_little_endian, int scale_to_unit);

/**
 * @brief Guarda un tensor planar (C x H x W) en un archivo .bin (float32).
 * @param filename Ruta del archivo de salida.
 * @param tensor Puntero a los datos.
 * @param C Canales
 * @param H Altura
 * @param W Anchura
 * @return 0 en √©xito, -1 en error.
 */
int save_tensor_planar_f32(const char* filename, const float* tensor, int C, int H, int W);

#ifdef __cplusplus
}
#endif

#endif // IO_HELPERS_H</code></pre>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/c.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
